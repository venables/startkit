#!/usr/bin/env sh

#
# Install dependencies
#
echo "âœ¨ Installing dependencies ..."
bun install --frozen-lockfile

#
# Create a .env.local file and popupate it with auto-generated secrets
#
if ! [ -f .env.local ]; then
  echo "\nâœ¨ Creating a .env.local file for local environment variables..."
  touch .env.local

  echo "\nâœ¨ Generating a secure value for local AUTH_SECRET ..."
  echo "AUTH_SECRET=\"$(openssl rand -base64 32)\"" >> .env.local
  echo "AUTH_URL=\"http://localhost:3000\"" >> .env.local
fi

#
# Migrate the database
#
echo "\nâœ¨ Migrating the database..."
bun run db:migrate

#
# Done.
#
echo "\nðŸŽ‰ All set. Happy coding!"
